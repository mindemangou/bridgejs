(function(i,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("htmx.org")):typeof define=="function"&&define.amd?define(["exports","htmx.org"],r):(i=typeof globalThis<"u"?globalThis:i||self,r(i.magiccomponents={},i.htmx))})(this,function(i,r){"use strict";var k=Object.defineProperty;var M=(i,r,c)=>r in i?k(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c;var h=(i,r,c)=>M(i,typeof r!="symbol"?r+"":r,c);const c=(t,e)=>{customElements.get(t)||customElements.define(t,e)},y=async(t,e,o=null)=>{const s=(await Promise.resolve().then(()=>C)).default;c(t,s(e,o))},f=(t,e)=>{const o=location.origin,n=Object.fromEntries(new URL(location.toString()).searchParams.entries());let s=`?${new URLSearchParams({...n,...t}).toString()}`,a=location.hash;return e.length>0&&(a=`#${e}`),`${o}${s}${a}`},b=({name:t,key:e},o={},n="")=>{const s=f(o,n),a=e?`${t}[data-key='${e}']`:`${t}:nth-child(1 of ${t})`;return r.ajax("GET",s,{target:a,select:a,swap:"outerHTML"})},m=t=>{var d;const e={...t.dataset},o=Object.entries(e),n=new Map(o),s=t.querySelector("template");if(s){const l=(d=s==null?void 0:s.content.textContent)==null?void 0:d.trim(),O=l?JSON.parse(l):{};n.set("data",O)}return n.set("tagName",t.tagName.toLowerCase()),Object.fromEntries(n)};let u=0;const w=async(t,e)=>{var s;if(r.config.refreshOnHistoryMiss===!1)return console.warn("Redirect is not enabled"),!1;const o=document.body;o.innerHTML+=`<span hx-disinherit="*" class='link-parent' > 
  <a class='bridge-redirect-link' href='${t}' hx-headers='${JSON.stringify(e)}' hx-boost='true' id='bridge-redirect-link-${u}' hx-sync=".bridge-redirect-link:abort" ></a> 
  </span>`,r.process(document.body);const n=o.querySelector(`.link-parent>#bridge-redirect-link-${u}`);n==null||n.click(),u++,(s=n==null?void 0:n.parentElement)==null||s.remove()},T=async({redirect:t,loader:e})=>{if(t&&(r.config.refreshOnHistoryMiss=!0),e!=null&&e.enable){await Promise.resolve().then(()=>E);const o=document.createElement("bridge-loader");o.setAttribute("data-color",e.color??"#639ef4"),document.body.append(o)}};let g=[];const C=Object.freeze(Object.defineProperty({__proto__:null,default:(t,e)=>{class o extends HTMLElement{constructor(){super()}connectedCallback(){var d;if(((d=this.parentElement)==null?void 0:d.tagName)==="TEMPLATE")return;if(this.hasAttribute("data-key")){const l=this.getAttribute("data-key");if(g.includes(l))throw new Error(`The key '${l}' already exists`);g.push(l)}const a=m(this);t({element:this,props:a})}disconnectedCallBack(){e&&e({element:this})}}return o}},Symbol.toStringTag,{value:"Module"}));class p extends HTMLElement{constructor(){super();h(this,"animationOne");h(this,"animationTwo")}connectedCallback(){const o=this.getAttribute("data-color")??"#639ef4";this.style.height="0.2rem",this.style.width="0",this.style.position="fixed",this.style.top="0",this.style.left="0",this.style.zIndex="9999",this.style.backgroundColor=o,this.style.display="none",r.on("htmx:beforeRequest",n=>{var a;const s=n;(a=s==null?void 0:s.detail)!=null&&a.boosted&&(this.style.display="block",this.animationOne=this.animate([{width:0},{width:"88%"}],{duration:7e3,fill:"forwards"}),this.animationOne.addEventListener("finish",()=>{this.animationTwo=this.animate([{width:"88%"},{width:"95%"}],{duration:5e3,iterations:1/0})}))})}disconnectedCallback(){var o,n;this.animationOne&&((o=this.animationOne)==null||o.cancel()),this.animationTwo&&((n=this.animationTwo)==null||n.cancel())}}customElements.define("bridge-loader",p);const E=Object.freeze(Object.defineProperty({__proto__:null,MagicLoader:p},Symbol.toStringTag,{value:"Module"}));i.config=T,i.define=y,i.getPath=f,i.getProps=m,i.redirect=w,i.reload=b,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
