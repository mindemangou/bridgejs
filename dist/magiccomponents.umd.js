(function(s,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("htmx.org")):typeof define=="function"&&define.amd?define(["exports","htmx.org"],r):(s=typeof globalThis<"u"?globalThis:s||self,r(s.magiccomponents={},s.htmx))})(this,function(s,r){"use strict";var k=Object.defineProperty;var E=(s,r,c)=>r in s?k(s,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[r]=c;var d=(s,r,c)=>E(s,typeof r!="symbol"?r+"":r,c);const c=(e,t)=>{customElements.get(e)||customElements.define(e,t)},y=async(e,t,o=null)=>{const i=(await Promise.resolve().then(()=>O)).default;c(e,i(t,o))},u=(e,t)=>{const o=location.origin,n=Object.fromEntries(new URL(location.toString()).searchParams.entries());let i=`?${new URLSearchParams({...n,...e}).toString()}`,a=location.hash;return t.length>0&&(a=`#${t}`),`${o}${i}${a}`},b=({name:e,key:t},o={},n="")=>{const i=u(o,n),a=t?`${e}[data-key='${t}']`:`${e}:nth-child(1 of ${e})`;return r.ajax("GET",i,{target:a,select:a,swap:"outerHTML"})},h=e=>{var g;const t={...e.dataset},o=Object.entries(t),n=new Map(o),i=e.querySelector("template");if(i){const p=(g=i==null?void 0:i.content.textContent)==null?void 0:g.trim(),T=p?JSON.parse(p):{};n.set("data",T)}return n.set("tagName",e.tagName.toLowerCase()),Object.fromEntries(n)};let l=0;const w=async(e,t)=>{var i;if(r.config.refreshOnHistoryMiss===!1)return console.warn("Redirect is not enabled"),!1;const o=document.body;o.innerHTML+=`<span hx-disinherit="*" class='link-parent' > 
  <a class='bridge-redirect-link' href='${e}' hx-headers='${JSON.stringify(t)}' hx-boost='true' id='bridge-redirect-link-${l}' hx-sync=".bridge-redirect-link:abort" ></a> 
  </span>`,r.process(document.body);const n=o.querySelector(`.link-parent>#bridge-redirect-link-${l}`);n==null||n.click(),l++,(i=n==null?void 0:n.parentElement)==null||i.remove()},C=async({redirect:e,loader:t})=>{if(e&&(r.config.refreshOnHistoryMiss=!0),t!=null&&t.enable){await Promise.resolve().then(()=>M);const o=document.createElement("bridge-loader");o.setAttribute("data-color",t.color??"#639ef4"),document.body.append(o)}};let f=0;const O=Object.freeze(Object.defineProperty({__proto__:null,default:(e,t)=>{class o extends HTMLElement{constructor(){super()}connectedCallback(){this.hasAttribute("data-key")||(this.setAttribute("data-key",`component-${f}`),f++);const i=h(this);e({element:this,props:i})}disconnectedCallBack(){t&&t({element:this})}}return o}},Symbol.toStringTag,{value:"Module"}));class m extends HTMLElement{constructor(){super();d(this,"animationOne");d(this,"animationTwo")}connectedCallback(){const o=this.getAttribute("data-color")??"#639ef4";this.style.height="0.2rem",this.style.width="0",this.style.position="fixed",this.style.top="0",this.style.left="0",this.style.zIndex="9999",this.style.backgroundColor=o,this.style.display="none",r.on("htmx:beforeRequest",n=>{var a;const i=n;(a=i==null?void 0:i.detail)!=null&&a.boosted&&(this.style.display="block",this.animationOne=this.animate([{width:0},{width:"88%"}],{duration:7e3,fill:"forwards"}),this.animationOne.addEventListener("finish",()=>{this.animationTwo=this.animate([{width:"88%"},{width:"95%"}],{duration:5e3,iterations:1/0})}))})}disconnectedCallback(){var o,n;this.animationOne&&((o=this.animationOne)==null||o.cancel()),this.animationTwo&&((n=this.animationTwo)==null||n.cancel())}}customElements.define("bridge-loader",m);const M=Object.freeze(Object.defineProperty({__proto__:null,MagicLoader:m},Symbol.toStringTag,{value:"Module"}));s.config=C,s.define=y,s.getPath=u,s.getProps=h,s.redirect=w,s.reload=b,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
