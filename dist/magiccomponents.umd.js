(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("htmx.org")):typeof define=="function"&&define.amd?define(["exports","htmx.org"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i["magic-components"]={},i.htmx))})(this,function(i,s){"use strict";var T=Object.defineProperty;var E=(i,s,c)=>s in i?T(i,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[s]=c;var d=(i,s,c)=>E(i,typeof s!="symbol"?s+"":s,c);const c=(n,e)=>{customElements.get(n)||customElements.define(n,e)},p=async(n,e,o=null)=>{const r=(await Promise.resolve().then(()=>C)).default;c(n,r(e,o))},u=(n,e)=>{const o=location.origin,t=Object.fromEntries(new URL(location.toString()).searchParams.entries());let r=`?${new URLSearchParams({...t,...n}).toString()}`,a=location.hash;return e.length>0&&(a=`#${e}`),`${o}${r}${a}`},b=(n,e={},o="")=>{const t=u(e,o);return s.ajax("GET",t,{target:n,select:n,swap:"innerHTML"})},f=n=>{var m;const e={...n.dataset},o=Object.entries(e),t=new Map(o),r=n.querySelector("template");if(r){const g=(m=r==null?void 0:r.content.textContent)==null?void 0:m.trim(),M=g?JSON.parse(g):{};t.set("data",M)}return t.set("tagName",n.tagName.toLowerCase()),Object.fromEntries(t)};let l=0;const y=async(n,e)=>{var r;if(s.config.refreshOnHistoryMiss===!1)return console.warn("Redirect is not enabled"),!1;const o=document.body;o.innerHTML+=`<span hx-disinherit="*" class='link-parent' > 
  <a class='bridge-redirect-link' href='${n}' hx-headers='${JSON.stringify(e)}' hx-boost='true' id='bridge-redirect-link-${l}' hx-sync=".bridge-redirect-link:abort" ></a> 
  </span>`,s.process(document.body);const t=o.querySelector(`.link-parent>#bridge-redirect-link-${l}`);t==null||t.click(),l++,(r=t==null?void 0:t.parentElement)==null||r.remove()},w=async({redirect:n,loader:e})=>{if(n&&(s.config.refreshOnHistoryMiss=!0),e!=null&&e.enable){await Promise.resolve().then(()=>O);const o=document.createElement("bridge-loader");o.setAttribute("data-color",e.color??"#639ef4"),document.body.append(o)}},C=Object.freeze(Object.defineProperty({__proto__:null,default:(n,e)=>{class o extends HTMLElement{constructor(){super()}connectedCallback(){const r=f(this);n({element:this,props:r})}disconnectedCallBack(){e&&e({element:this})}}return o}},Symbol.toStringTag,{value:"Module"}));class h extends HTMLElement{constructor(){super();d(this,"animationOne");d(this,"animationTwo")}connectedCallback(){const o=this.getAttribute("data-color")??"#639ef4";this.style.height="0.2rem",this.style.width="0",this.style.position="fixed",this.style.top="0",this.style.left="0",this.style.zIndex="9999",this.style.backgroundColor=o,this.style.display="none",s.on("htmx:beforeRequest",t=>{var a;const r=t;(a=r==null?void 0:r.detail)!=null&&a.boosted&&(this.style.display="block",this.animationOne=this.animate([{width:0},{width:"88%"}],{duration:7e3,fill:"forwards"}),this.animationOne.addEventListener("finish",()=>{this.animationTwo=this.animate([{width:"88%"},{width:"95%"}],{duration:5e3,iterations:1/0})}))})}disconnectedCallback(){var o,t;this.animationOne&&((o=this.animationOne)==null||o.cancel()),this.animationTwo&&((t=this.animationTwo)==null||t.cancel())}}customElements.define("bridge-loader",h);const O=Object.freeze(Object.defineProperty({__proto__:null,MagicLoader:h},Symbol.toStringTag,{value:"Module"}));i.config=w,i.define=p,i.getPath=u,i.getProps=f,i.redirect=y,i.reload=b,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
